"use strict";function initMap(){var a={lat:42.6977,lng:23.3219},b=new google.maps.Map(document.getElementById("map"),{center:a,zoom:10});google.maps.event.addListener(b,"click",function(a){marker=addMarker(a.latLng,b,marker)})}function addMarker(a,b,c){var d=new google.maps.Marker({position:a,map:b});return c&&c.setMap(null),d}var app=app||{},marker;$(function(){$(".datepicker").datepicker({dateFormat:"yyyy-mm-dd"})}),$("#create").on("click",function(a){if(!marker)return app.notifier.showNotification("You should choose a location on the map","error"),a.preventDefault(),!1;var b=marker.getPosition().lat(),c=marker.getPosition().lng(),d=$("#competitionName").val(),e=$("#place").val(),f=$("#description").val(),g=$("#points").val(),h=$("#level").val(),i=$("#category").val(),j=$("#startDate").val(),k=$("#endDate").val(),l=$("#tb-competition")[0].files[0],m=new FormData;m.append("competitionImage",l),m.append("competitionName",d),m.append("place",e),m.append("description",f),m.append("points",g),m.append("level",h),m.append("category",i),m.append("latitude",b),m.append("longitude",c),m.append("startDate",j),m.append("endDate",k),a.preventDefault(),app.requester.postWithFile("/competitions/create",m).then(function(a){if(a.success)app.notifier.showNotification(a.success,"success"),setTimeout(function(){window.location.href="/competitions/"+a.competition.id},500);else if(a.error)return void app.notifier.showNotification(a.error,"error")}).catch(function(a){app.notifier.showNotification("Competition could not be created.","error")})});